(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{139:function(e,t,o){"use strict";o.r(t);var r=o(801),n=o(559);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o(699);var i=o(3),s=Object(i.a)(n.default,r.a,r.b,!1,null,null,null);t.default=s.exports},517:function(e,t,o){e.exports={default:o(521),__esModule:!0}},519:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(22);t.default={unSupportCategoryIds:function(){return["comic","audio","mp","7400","400","6100","6200","10000000","2400000","novel_finished","novel_series","audio_update"]},matchSupportCategory:function(e,t){var o=(1<arguments.length&&void 0!==t?t:[]).map(function(e){return e.CategoryId});return-1===this.unSupportCategoryIds().concat(o).indexOf(e)},supportCategories:function(e,t){var o=this;return e.filter(function(e){return o.matchSupportCategory(e.CategoryId,t)})},unSupportCategories:function(e,t){var o=this;return e.filter(function(e){return!o.matchSupportCategory(e.CategoryId,t)})},sortTopCategories:function(e){for(var t=[],o=[],r=0;r<e.length;r++){var n=e[r];"rising"===n.CategoryId?t[1]=n:"newbook"===n.CategoryId?t[2]=n:"all"===n.CategoryId?t[0]=n:"novel_male"===n.CategoryId?t[3]=n:o.push(n)}return t.filter(function(e){return!a.isEmpty(e)}).concat(o)},sortCategories:function(e){for(var t=[],o=[],r=0;r<e.length;r++){var n=e[r];"1700000"===n.CategoryId?t[0]=n:"1900000"===n.CategoryId?t[1]=n:"300000"===n.CategoryId?t[2]=n:"100000"===n.CategoryId?t[3]=n:"200000"===n.CategoryId?t[4]=n:"1100000"===n.CategoryId?t[5]=n:"700000"===n.CategoryId?t[6]=n:"400000"===n.CategoryId?t[7]=n:o.push(n)}return t.filter(function(e){return!a.isEmpty(e)}).concat(o)}}},521:function(e,t,o){o(195),o(136),e.exports=o(522)},522:function(e,t,o){var r=o(23),n=o(196);e.exports=o(8).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},523:function(e,t,o){"use strict";t.__esModule=!0,t.default=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}},550:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(o(131)),n=u(o(133)),g=u(o(517)),f=u(o(277));t.default=function(){var e,t;return{state:{categories:[],otherCategories:[],topCategories:[],otherTopCategories:[],allUnsupportSublistCategories:[],recommendBooks:[],isFetchRecommendBooks:!1,bookInShelfData:[]},mutations:(e={},(0,n.default)(e,_.UPDATE_CATEGORIES,function(e,t){var o=[],r=!0,n=!1,a=void 0;try{for(var i,s=(0,g.default)(t);!(r=(i=s.next()).done);r=!0){var u=i.value;if(28===u.type){for(var l=u.categories,c=0;c<l.length;c++){var d=l[c];"novel"===d.pCategoryId&&d.sublist.length<=0&&(d.sublist=[{CategoryId:"novel_male",title:"男生小说"},{CategoryId:"novel_female",title:"女生小说"}])}0<l.length&&(e.topCategories=h.default.supportCategories(l),e.otherTopCategories=h.default.unSupportCategories(l))}else 0<u.categories.length&&o.push.apply(o,(0,f.default)(u.categories))}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}e.categories=h.default.supportCategories(o),e.otherCategories=h.default.unSupportCategories(o),e.allUnsupportSublistCategories=function e(t){if(!t||t.length<=0)return[];var o=[];for(var r=0;r<t.length;r++){var n=t[r];n.sublist&&0<n.sublist.length&&o.push.apply(o,(0,f.default)(e(n.sublist))),o.push(n)}return o}(e.otherCategories)}),(0,n.default)(e,_.UPDATE_FETCHING_RECOMMEND_BOOKS,function(e,t){e.isFetchRecommendBooks=t}),(0,n.default)(e,_.UPDATE_MAY_ALSO_LIKE,function(o,e){var t,r=l.unionBy(e,function(e){return e.bookId}).filter(function(e){if(!i.default.isSupportedBookType(e.type))return!1;for(var t=0;t<o.recommendBooks.length;t++)if(o.recommendBooks[t].bookId===e.bookId)return!1;return!0});(t=o.recommendBooks).push.apply(t,(0,f.default)(r))}),(0,n.default)(e,_.UPDATE_INDEX_BOOKS_IN_SHELF,function(e,t){var o=t.bookInShelfData;if(t.edit){for(var r=0;r<e.bookInShelfData.length;r++)if(o.bookId===e.bookInShelfData[r].bookId){var n=e.bookInShelfData[r];n.onShelf=o.onShelf,e.bookInShelfData[r]=n;break}}else{for(var a=[],i=[],s=0;s<o.length;s++){var u=o[s];-1===i.indexOf(u.bookId)&&(a.push(u),i.push(u.bookId))}e.bookInShelfData=a}}),e),actions:(t={},(0,n.default)(t,d.FETCH_CATEGORIES,function(e,t){var o=e.commit;return(0,a.default)("/web/categories",(0,r.default)({synckey:0},t),function(e){o(_.UPDATE_CATEGORIES,e.data.data)},function(e){console.log("err","-",e)})}),(0,n.default)(t,d.FETCH_MAY_ALSO_LIKE,function(e,t){var o=e.commit;return o(_.UPDATE_FETCHING_RECOMMEND_BOOKS,!0),(0,a.default)("/web/recommend_books",(0,r.default)({},t),function(e){o(_.UPDATE_FETCHING_RECOMMEND_BOOKS,!1),o(_.UPDATE_MAY_ALSO_LIKE,e.data.books)},function(e){o(_.UPDATE_FETCHING_RECOMMEND_BOOKS,!1),console.log("err","-",e)})}),(0,n.default)(t,d.FETCH_INDEX_ADD_SHELF,function(e,t){var o=e.commit;return(0,e.dispatch)(d.FETCH_ADD_SHELF,{bookIds:[t.bookId]}).then(function(e){!0===e||0<e.length?o(_.UPDATE_INDEX_BOOKS_IN_SHELF,{bookInShelfData:{bookId:t.bookId,onShelf:1},edit:!0}):console.log("data","-",e)}).catch(function(e){console.log("err","-",e)})}),(0,n.default)(t,d.FETCH_INDEX_BOOK_IN_SHELF,function(e){for(var t=e.commit,o=e.dispatch,r=e.state,n=[],a=0;a<r.topCategories.length;a++)for(var i=r.topCategories[a].lectureBooks,s=0;s<i.length;s++){var u=i[s].bookInfo||{};u.bookId&&n.push(u.bookId)}for(var l=0;l<r.recommendBooks.length;l++){var c=r.recommendBooks[l];c.bookId&&n.push(c.bookId)}n.length&&o(d.FETCH_IN_SHELF,{bookIds:n.join(",")}).then(function(e){t(_.UPDATE_INDEX_BOOKS_IN_SHELF,{bookInShelfData:e,edit:!1})}).catch(function(e){console.log("err","-",e)})}),t)}};var a=u(o(192)),i=u(o(191)),d=s(o(34)),_=s(o(60)),h=u(o(519));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var l=o(22)},559:function(e,t,o){"use strict";o.r(t);var r=o(560),n=o.n(r);for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);t.default=n.a},560:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=k(o(131)),n=k(o(132)),a=k(o(668)),i=k(o(696)),s=k(o(698)),l=k(o(550)),c=k(o(520)),u=k(o(280)),d=k(o(134)),g=k(o(42)),f=k(o(278)),_=k(o(519)),h=k(o(135)),C=o(35),p=v(o(34)),y=v(o(60)),I=k(o(19));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}var m=o(7),E=o(22),b="categoryStoreModule",S="homeStoreModule",T="bookStoreModule";t.default={name:"category.vue",components:{Menu:u.default,Loading:d.default,BookListItem:a.default,CategorySideBar:i.default},asyncData:function(e){var u=e.store,o=e.envConfig;return u.registerModule(b,(0,s.default)()),u.registerModule(S,(0,l.default)()),u.registerModule(T,(0,c.default)()),u.commit(y.UPDATE_PAGE_KEYWORDS,"百万书友为你精选的热门好书"),u.commit(y.UPDATE_PAGE_DESCRIPTION,"小说，小说排行榜，免费小说，言情小说，玄幻小说，电子书，好书推荐"),(new I.default).isPhone(o.userAgent)&&u.commit(y.UPDATE_SHOW_NAV_BAR,!1),new n.default(function(s,t){u.dispatch(p.FETCH_CATEGORIES_AND_BOOKS,{envConfig:o,categoryId:u.state.route.params.categoryId,homeModuleName:S}).then(function(e){var t=u.state[S].categories,o=u.state[S].topCategories,r=u.state[S].otherTopCategories,n=u.state[S].otherCategories,a=u.getters.getCurrentCategoryInfo(t,n,o,r);if(a&&!E.isEmpty(a)){var i=a.currentCategory.title;i&&0<i.length?-1!==i.indexOf("男生")||-1!==i.indexOf("女生")?u.commit(y.UPDATE_PAGE_TITLE,"小说榜-微信读书 "):-1!==i.indexOf("榜")?u.commit(y.UPDATE_PAGE_TITLE,a.currentCategory.title+"-微信读书 "):u.commit(y.UPDATE_PAGE_TITLE,a.currentCategory.title+"榜-微信读书 "):u.commit(y.UPDATE_PAGE_TITLE,"榜单-微信读书 ")}s(e)}).catch(function(e){t(e)})})},destroyed:function(){this.$store.unregisterModule(b),this.$store.unregisterModule(S),this.$store.unregisterModule(T)},data:function(){return{}},created:function(){m.isEnvClient&&(this.$store.registerModule(b,(0,s.default)(),{preserveState:!0}),this.$store.registerModule(T,(0,c.default)(),{preserveState:!0}),(0,f.default)())},mounted:function(){var t=this;if(m.isEnvClient){if(this.haveReportInfo("Index_Category_All")?this.reportClientBusiness({itemName:"Web_Home_Top200_More"},"Index_Category_All"):this.haveReportInfo("Index_Category_Novel")?this.reportClientBusiness({itemName:"Web_Home_TopFic_More"},"Index_Category_Novel"):this.haveReportInfo("Index_Category_New")?this.reportClientBusiness({itemName:"Web_Home_TopNew_More"},"Index_Category_New"):this.haveReportInfo("Index_Category_Rise")&&this.reportClientBusiness({itemName:"Web_Home_TopRise_More"},"Index_Category_Rise"),this.haveReportInfo("Index_Enter_Category")&&this.reportClientBusiness({itemName:"Web_Ranking_EnterFromHome"},"Index_Enter_Category"),this.haveReportInfo("Search_Enter_Category")&&this.reportClientBusiness({itemName:"Web_Ranking_EnterFromSearch"},"Search_Enter_Category"),this.haveReportInfo("ReaderInfo_Enter_Category")&&this.reportClientBusiness({itemName:"Web_Ranking_EnterFromReader"},"ReaderInfo_Enter_Category"),this.haveReportInfo("Category_Side_Click")&&this.reportClientBusiness({itemName:"Web_Ranking_All_Clk"},"Category_Side_Click"),this.haveReportInfo("Category_Side_Click_Type")&&this.reportClientBusiness({itemName:"Web_Ranking_"+this.categoryId+"_Clk"},"Category_Side_Click_Type"),this.haveReportInfo("SearchResult_Click_Category")&&this.reportClientBusiness({itemName:"Web_Search_ResultClk"},"SearchResult_Click_Category"),this.reportClientBusiness({itemName:"Web_Ranking_Type_Exp"}),this.isWeiXin&&this.hasLogin){var e=this.$router.currentRoute.query,o=e.wvid&&"app"===e.wfrom;o&&this.reportClientGlobal({itemName:"Web_Enter_Activity"}),o&&(this.reportClientAppSharePage({itemName:"page|Web_AppShare_Enter_Category"}),this.reportClientAppSharePage({itemName:"page|Web_AppShare_Enter_Category|h5"}),this.reportClientBusiness({itemName:"Web_AppShare_Enter_Category"}),this.reportClientBusiness({itemName:"Web_AppShare_Enter_CategorySelf",vid:e.wvid}))}var r=this.$router.currentRoute.query;r&&r.packetId&&this.$store.dispatch(p.FETCH_ENCOURAGE_MONEY,{packetId:r.packetId}),this.scrollToCurrentCategory(),this.$nextTick(function(){t.scrollToCurrentCategory(),g.default.handleElementScrollEvent(window,function(){t.handleLoadMoreBooks()},function(){var e=t.$refs.categoryMenu;e&&e.hideMenu()}),document.body.addEventListener("click",function(){var e=t.$refs.categoryMenu;e&&e.hideMenu()})})}},methods:{handleMenuClickOption:function(e){var t=e.index;if(this.rootCategory.showAll&&1===this.rootCategory.showAll){if(0===t)return void(0,h.default)("/web/category/"+this.rootCategoryId);t-=1}var o=this.categorySublist[t];(0,h.default)("/web/category/"+o.CategoryId)},handleLoadMoreBooks:function(){!this.isFetchingBooks&&this.hasMoreBooks&&this.$store.dispatch(p.FETCH_CATEGORY_BOOK_LIST,{categoryId:this.categoryId,maxIndex:this.maxIndex,append:!0,homeModuleName:S})},handleAddShelfEvent:function(e){var t=this;this.hasLogin?this.$store.dispatch(p.FETCH_CATEGORY_ADD_SHELF,{bookId:e}).then(function(e){e&&t.$toast("加入书架成功")}):this.$showLoginDialog({bottomTitle:"扫码登录微信读书",bottomSubTitle:"在书架随时阅读本书"})},handleClickCategorySidebarItem:function(){this.saveReportInfo("Category_Side_Click"),this.saveReportInfo("Category_Side_Click_Type")},scrollToCurrentCategory:function(){if(this.$refs.categorySideBar){var e=this.$refs.categorySideBar.getListDom(),t=this.$refs.categorySideBar.getActiveDom(),o=e.scrollHeight,r=e.innerHeight||e.clientHeight,n=t.offsetTop;e.scrollTop=r-60<n?o-r<n-280?o-r:n-280:0}}},computed:(0,r.default)({bookInShelfObj:function(){if(this.bookInShelfData){for(var e={},t=0;t<this.bookInShelfData.length;t++){var o=this.bookInShelfData[t];e[o.bookId]=1===o.onShelf}return e}return{}},categoryBooks:function(){return E.unionBy(this.categoryBookList,function(e){return e.bookInfo.bookId})||[]},maxIndex:function(){return this.categoryBookList&&0<this.categoryBookList.length?this.categoryBookList[this.categoryBookList.length-1].searchIdx:0},menuSelectedIndex:function(){var e=this.categorySublistTitle.indexOf(this.currentCategory.title);return 0<e?e:0},currentCategory:function(){var e=this.$store.getters.getCurrentCategoryInfo(this.categories,this.otherCategories,this.topCategories,this.otherTopCategories);if(e&&!E.isEmpty(e))return e.currentCategory;for(var t=0;t<this.allUnsupportSublistCategories.length;t++){var o=this.allUnsupportSublistCategories[t];if(o.CategoryId===this.categoryId)return o}return{}},backupTitle:function(){if("novel_finished"===this.categoryId)return"小说榜 · 完结";if("novel_series"===this.categoryId)return"小说榜 · 连载";if("audio_update"===this.categoryId)return"听书榜 · 更新";var e=this.$router.currentRoute.query;return e&&e.wtitle?e.wtitle:""},currentCategoryTitleImage:function(){for(var e=0;e<this.displayTopCategories.length;e++){var t=this.displayTopCategories[e];if(t.CategoryId===this.currentCategory.CategoryId)return t.ranklistCover.chart_title}for(var o=0;o<this.otherTopCategories.length;o++){var r=this.otherTopCategories[o];if(r.CategoryId===this.currentCategory.CategoryId)return r.ranklistCover.chart_title}return""},rootCategory:function(){var e=this.$store.getters.getCurrentCategoryInfo(this.categories,this.topCategories);return e&&!E.isEmpty(e)?e.rootCategory:{}},rootCategoryId:function(){var e=this.rootCategory;return e&&!E.isEmpty(e)?e.CategoryId:""},categorySublist:function(){return this.rootCategory.sublist?this.rootCategory.sublist:[]},categorySublistTitle:function(){if(0<this.categorySublist.length){var e=this.categorySublist.map(function(e){return e.title});return 1===this.rootCategory.showAll&&e.unshift("全部"),e}return[]},displayCategories:function(){return _.default.sortCategories(this.categories)||[]},displayTopCategories:function(){return _.default.sortTopCategories(this.topCategories)||[]}},(0,C.mapState)({categories:function(e){return e[S].categories},otherCategories:function(e){return e[S].otherCategories},topCategories:function(e){return e[S].topCategories},otherTopCategories:function(e){return e[S].otherTopCategories},allUnsupportSublistCategories:function(e){return e[S].allUnsupportSublistCategories},categoryId:function(e){return e[b].categoryId},isFetchingBooks:function(e){return e[b].isFetching},hasMoreBooks:function(e){return e[b].hasMore},categoryBookList:function(e){return e[b].categoryBookList},bookInShelfData:function(e){return e[b].bookInShelfData}}))}},567:function(e,t,o){"use strict";o.r(t);var r=o(568),n=o.n(r);for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);t.default=n.a},568:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"CategorySideBar",props:{rootCategoryId:"",displayCategories:{type:Array,default:[]},displayTopCategories:{type:Array,default:[]}},mounted:function(){},methods:{getListDom:function(){return this.$refs.category_list||{}},getActiveDom:function(){return this.$refs.category_active?this.$refs.category_active[0]:{}},linkUsedCategoryId:function(e){return"novel"===e.pCategoryId?e.sublist[2===this.user.gender?1:0].CategoryId:1!==e.showAll&&e.sublist&&0<e.sublist.length?e.sublist[0].CategoryId:e.CategoryId},handleClickCategorySidebarItem:function(){this.$emit("click-category-sidebar-item")}}}},569:function(e,t,o){},570:function(e,t,o){},696:function(e,t,o){"use strict";o.r(t);var r=o(812),n=o(567);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o(697);var i=o(3),s=Object(i.a)(n.default,r.a,r.b,!1,null,null,null);t.default=s.exports},697:function(e,t,o){"use strict";var r=o(569);o.n(r).a},698:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(o(523)),n=_(o(284)),c=_(o(131)),a=_(o(133)),k=_(o(517)),m=_(o(277));t.default=function(){var e,t;return{state:{categoryId:"",isFetching:!1,isFetchError:!1,hasMore:!1,categoryBookList:[],bookInShelfData:[]},getters:{getCurrentCategoryInfo:function(v){return function(e,t,o,r){var n=v.categoryId,a={},i=[];o&&0<o.length&&i.push.apply(i,(0,m.default)(o)),r&&0<r.length&&i.push.apply(i,(0,m.default)(r)),e&&0<e.length&&i.push.apply(i,(0,m.default)(e)),t&&0<t.length&&i.push.apply(i,(0,m.default)(t));var s=!0,u=!1,l=void 0;try{for(var c,d=(0,k.default)(i);!(s=(c=d.next()).done);s=!0){var g=c.value;if(g.CategoryId===n){a.rootCategory=g,a.currentCategory=g;break}if(g.sublist&&0<g.sublist.length){var f=!1,_=!0,h=!1,C=void 0;try{for(var p,y=(0,k.default)(g.sublist);!(_=(p=y.next()).done);_=!0){var I=p.value;if(I.CategoryId===n){a.rootCategory=g,a.currentCategory=I,f=!0;break}}}catch(e){h=!0,C=e}finally{try{!_&&y.return&&y.return()}finally{if(h)throw C}}if(f)break}}}catch(e){u=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw l}}return a}}},mutations:(e={},(0,a.default)(e,f.UPDATE_CATEGORY_ID,function(e,t){e.categoryId=t.categoryId}),(0,a.default)(e,f.UPDATE_FETCHING_STATE,function(e,t){var o=t.isFetching,r=t.isFetchError,n=t.hasMore;e.isFetching=o,e.isFetchError=r,void 0!==n&&(e.hasMore=1===n)}),(0,a.default)(e,f.UPDATE_CATEGORY_BOOK_LIST,function(r,n){var a=n.allUnsupportSublistCategories||[],i=new l.default,e=n.books.filter(function(e){if(u.default.matchSupportCategory(r.categoryId,a))return s.default.isSupportedBookType(e.bookInfo.type);var t=n.envConfig?i.isPhone(n.envConfig.userAgent):i.isPhone(),o=n.envConfig?i.isWeiXin(n.envConfig.userAgent):i.isWeiXin();return t||o})||[],t=n.append;e.length<=0?t?r.hasMore=!1:r.categoryBookList=[]:r.categoryBookList=t?r.categoryBookList.concat(e):e}),(0,a.default)(e,f.UPDATE_CATEGORY_BOOKS_IN_SHEFL,function(e,t){var o=t.bookInShelfData;if(t.edit){for(var r=0;r<e.bookInShelfData.length;r++)if(o.bookId===e.bookInShelfData[r].bookId){var n=e.bookInShelfData[r];n.onShelf=o.onShelf,e.bookInShelfData[r]=n;break}}else{for(var a=[],i=[],s=0;s<o.length;s++){var u=o[s];-1===i.indexOf(u.bookId)&&(a.push(u),i.push(u.bookId))}e.bookInShelfData=a}}),e),actions:(t={},(0,a.default)(t,g.FETCH_CATEGORIES_AND_BOOKS,function(e,t){var i=e.dispatch,s=e.rootState,u=t.envConfig,o=t.categoryId,l=t.homeModuleName;return o?i(g.FETCH_CATEGORIES,u).then(function(){return i(g.FETCH_CATEGORY_BOOK_LIST,{envConfig:u,categoryId:o,append:!1,homeModuleName:l})}).catch(function(e){return e}):i(g.FETCH_CATEGORIES,u).then(function(){var e=s[l].topCategories,t=s[l].categories,o=void 0;if(e&&0<e.length)for(var r=0;r<e.length;r++){var n=e[r];"all"===n.CategoryId&&(o=n)}if(!o&&t&&0<t.length&&(o=t[0]),o){var a=h.get(o,"CategoryId","");return i(g.FETCH_CATEGORY_BOOK_LIST,{envConfig:u,categoryId:a,append:!1,homeModuleName:l})}})}),(0,a.default)(t,g.FETCH_CATEGORY_BOOK_LIST,function(e,a){var i=e.commit,s=e.dispatch,t=e.state,u=e.rootState;i(f.UPDATE_CATEGORY_ID,{categoryId:a.categoryId});var o=(0,c.default)({},a.envConfig);0<a.maxIndex&&(o.maxIndex=a.maxIndex),(0,n.default)(Number(t.categoryId))&&(o.rank=1);var l="undefined"!==a.append&&a.append;return i(f.UPDATE_FETCHING_STATE,{isFetching:!0,isFetchError:!1}),(0,d.default)("/web/bookListInCategory/"+a.categoryId,o,function(e){var t=h.get(e,"data.books",[]).map(function(e){return e.isBookInMyShelf=!1,e}).sort(function(e,t){return e.searchIdx-t.searchIdx}),o=h.get(e,"data.hasMore",!1);i(f.UPDATE_FETCHING_STATE,{isFetching:!1,isFetchError:!1,hasMore:o});var r=a.homeModuleName,n=u[r].allUnsupportSublistCategories;i(f.UPDATE_CATEGORY_BOOK_LIST,{books:t,append:l,envConfig:a.envConfig,allUnsupportSublistCategories:n}),l&&u.user&&u.user.vid&&s(g.FETCH_CATEGORY_BOOK_IN_SHELF,{})},function(){i(f.UPDATE_FETCHING_STATE,{isFetching:!1,isFetchError:!0})})}),(0,a.default)(t,g.FETCH_CATEGORY_BOOK_IN_SHELF,function(e){var t=e.commit,o=e.dispatch,r=e.state.categoryBookList.map(function(e){return e.bookInfo.bookId}).join(",");r.length&&o(g.FETCH_IN_SHELF,{bookIds:r}).then(function(e){t(f.UPDATE_CATEGORY_BOOKS_IN_SHEFL,{bookInShelfData:e,edit:!1})}).catch(function(e){console.log("err","-",e)})}),(0,a.default)(t,g.FETCH_CATEGORY_ADD_SHELF,function(e,t){var o=e.commit;return(0,e.dispatch)(g.FETCH_ADD_SHELF,{bookIds:[t.bookId]}).then(function(e){if(!0===e||0<e.length)return o(f.UPDATE_CATEGORY_BOOKS_IN_SHEFL,{bookInShelfData:{bookId:t.bookId,onShelf:1},edit:!0}),!0;console.log("data","-",e)}).catch(function(e){console.log("err","-",e)})}),(0,a.default)(t,g.FETCH_ENCOURAGE_MONEY,function(e,t){(0,r.default)(e);var o=t.packetId||"";return(0,d.default)("/web/pay/memberCardCouponPacket",{packetId:o},function(){},function(){})}),t)}};var d=_(o(192)),s=_(o(191)),u=_(o(519)),l=_(o(19)),g=i(o(34)),f=i(o(60));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var h=o(22)},699:function(e,t,o){"use strict";var r=o(570);o.n(r).a},801:function(e,t,o){"use strict";function r(){var o=this,e=o.$createElement,r=o._self._c||e;return r("div",{class:["app_content","ranking_page_container",{ranking_isFromWeReadApp:o.isFromWeReadApp}]},[o.isFromWeReadApp?o._e():r("div",{staticClass:"ranking_page_sidebar_Container"},[r("CategorySideBar",{ref:"categorySideBar",attrs:{"root-category-id":o.rootCategoryId,"display-categories":o.displayCategories,"display-top-categories":o.displayTopCategories},on:{"click-category-sidebar-item":o.handleClickCategorySidebarItem}})],1),r("div",{staticClass:"ranking_page_content"},[r("div",{staticClass:"ranking_page_header"},[1<o.categorySublistTitle.length&&!o.isPhone?r("Menu",{ref:"categoryMenu",staticClass:"ranking_page_header_menu",attrs:{defaultSelectedIndex:o.menuSelectedIndex,optionList:o.categorySublistTitle},on:{"handle-click-menu-option":o.handleMenuClickOption}}):o._e(),0<o.currentCategoryTitleImage.length?r("p",{staticClass:"ranking_page_header_img"},[r("img",{attrs:{src:o.currentCategoryTitleImage,alt:""}})]):r("p",{staticClass:"ranking_page_header_title"},[r("span",{staticClass:"ranking_page_header_title_text"},[o._v(o._s(o.currentCategory.title||o.backupTitle))])])],1),r("ul",{staticClass:"ranking_content_bookList"},o._l(o.categoryBooks,function(e,t){return r("BookListItem",{key:e?e.bookInfo.bookId:t,attrs:{"from-where":"category","extra-data":{categoryId:o.categoryId||o.rootCategory.CategoryId},"book-index":t,"show-index":!0,"show-add-shelf-button":!0,"book-in-shelf-obj":o.bookInShelfObj,"book-data":e},on:{handleBookListItemAddShelfEvent:o.handleAddShelfEvent}})}),1),r("div",{directives:[{name:"show",rawName:"v-show",value:o.isFetchingBooks,expression:"isFetchingBooks"}],staticClass:"ranking_content_loadingView"},[r("Loading",{attrs:{zoom:"0.4"}})],1),o.categoryBooks.length<=0?r("div",{staticClass:"ranking_content_emptyView"},[r("p",{staticClass:"ranking_content_emptyView_text"},[o._v("暂无书籍")])]):o._e()])])}var n=[];o.d(t,"a",function(){return r}),o.d(t,"b",function(){return n})},812:function(e,t,o){"use strict";function r(){var o=this,e=o.$createElement,r=o._self._c||e;return r("div",{staticClass:"ranking_page_sidebar",attrs:{id:"ranking_page_sidebar"}},[r("div",{staticClass:"ranking_page_sidebar_Border"},[r("ul",{ref:"category_list",staticClass:"ranking_list"},[o._l(o.displayTopCategories,function(e){return r("li",{key:e.CategoryId,ref:e.CategoryId===o.rootCategoryId?"category_active":"",refInFor:!0,class:[{ranking_list_item_current:e.CategoryId===o.rootCategoryId},"ranking_list_item"]},[r("a",{staticClass:"ranking_list_item_link",attrs:{href:"/web/category/"+o.linkUsedCategoryId(e)},on:{click:function(e){return o.handleClickCategorySidebarItem()}}},["all"===e.CategoryId?r("span",{staticClass:"ranking_list_item_img ranking_list_item_All"},[o._v("总榜")]):o._e(),"rising"===e.CategoryId?r("span",{staticClass:"ranking_list_item_img ranking_list_item_Rising"},[o._v("飙升榜")]):o._e(),"newbook"===e.CategoryId?r("span",{staticClass:"ranking_list_item_img ranking_list_item_Newbook"},[o._v("新书榜")]):o._e(),"novel_male"===e.CategoryId||"novel_female"===e.CategoryId?r("span",{staticClass:"ranking_list_item_img ranking_list_item_Novel"},[o._v("小说榜")]):o._e(),r("span",{directives:[{name:"show",rawName:"v-show",value:e.ranklistCover.chart_detail_title.length<=0,expression:"category.ranklistCover.chart_detail_title.length <= 0"}],staticClass:"ranking_list_item_txt"},[o._v("\n                        "+o._s(e.title)+"\n                    ")])])])}),o._l(o.displayCategories,function(t){return r("li",{key:t.CategoryId,ref:t.CategoryId===o.rootCategoryId?"category_active":"",refInFor:!0,class:[{ranking_list_item_current:t.CategoryId===o.rootCategoryId},"ranking_list_item"]},[r("a",{staticClass:"ranking_list_item_link",attrs:{href:"/web/category/"+o.linkUsedCategoryId(t)},on:{click:function(e){return o.handleClickCategorySidebarItem(t.CategoryId)}}},[o._v(o._s(t.title))])])})],2)])])}var n=[];o.d(t,"a",function(){return r}),o.d(t,"b",function(){return n})}}]);