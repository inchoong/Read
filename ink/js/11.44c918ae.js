(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{511:function(t,e,n){"use strict";n.r(e);var i=n(790),o=n(659);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);n(768);var u=n(3),a=Object(u.a)(o.default,i.a,i.b,!1,null,null,null);e.default=a.exports},518:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(61)),o=r(n(191));function r(t){return t&&t.__esModule?t:{default:t}}var u=n(22),a=n(7);e.default={isMemberShipValid:function(t){return 0!==(0,i.default)(t).length&&(0===u.get(t,"expired",1)&&0<u.get(t,"expiredTime",0)&&(new Date).getTime()<1e3*u.get(t,"expiredTime",0))},canReceiveMemberCard:function(t){return a.inDevelopment()&&console.log(t),!1},canBookFreeReading:function(t){var e=t.bookInfo,n=t.memberCardSummary;return this.isMemberShipValid(n)&&(o.default.isSupportMemberShip(e)||-1<u.get(n,"freeBookIds",[]).indexOf(e.bookId))},discountToChinese:function(t){var e=["零","一","二","三","四","五","六","七","八","九"],n=100-t;return n<=0?"":n<10?e[0]+e[n]+"折":n<100?n%10==0?e[n/10]+"折":e[n/10]+e[n%10]+"折":""}}},659:function(t,e,n){"use strict";n.r(e);var i=n(660),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e.default=o.a},660:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=N(n(131)),o=N(n(132)),r=v(n(60)),u=v(n(34)),a=N(n(62)),c=N(n(19)),f=N(n(44)),s=N(n(45)),l=N(n(46)),d=N(n(47)),_=N(n(767)),I=N(n(518)),m=n(35);function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function N(t){return t&&t.__esModule?t:{default:t}}var g=n(7),p="loginConfirmStoreModule";e.default={name:"LoginConfirm.vue",asyncData:function(t){var e=t.store,n=t.envConfig;e.registerModule(p,(0,_.default)()),e.commit(r.UPDATE_SHOW_NAV_BAR,!1);var i=[e.dispatch(u.FETCH_LOGIN_CONFIRM_NEW_USER_INFINITE_INFO,n),e.dispatch(u.FETCH_LOGIN_CONFIRM_UN_ACTIVE_INFINITE_INFO,n)];return o.default.all(i)},data:function(){return{loginSucceed:!1,statusText:"登录确认"}},destroyed:function(){this.$store.unregisterModule(p)},mounted:function(){g.isEnvClient&&(this.canReceiveInfiniteCard?this.reportClientBusiness({itemName:"Web_Phone_LoginGiftExp"}):this.reportClientBusiness({itemName:"Web_Phone_LoginNoGiftExp"}))},computed:(0,i.default)({bottomLoginText:function(){return this.canReceiveInfiniteCard?"送你一张无限卡<br />免费畅读百万好书":"微信读书无限卡<br />全场书籍免费读"},bottomLoginButtonText:function(){return this.canReceiveInfiniteCard?"领取":"立即体验"},canReceiveInfiniteCard:function(){return I.default.canReceiveMemberCard(this.newUserInfiniteInfo)||I.default.canReceiveMemberCard(this.unActiveInfiniteInfo)}},(0,m.mapState)({newUserInfiniteInfo:function(t){return t[p].newUserInfiniteInfo},unActiveInfiniteInfo:function(t){return t[p].unActiveInfiniteInfo}})),methods:{handleConfirmButton:function(){var e=this,t=this.$router.currentRoute.query.uid||"",n="iOS"===(new c.default).getOS()?1:2;0<t.length&&(this.statusText="正在登录...",(0,a.default)("/web/login/confirm",{uid:t,pf:n}).then(function(t){t&&t.data&&t.data.vid?(e.loginSucceed=!0,e.statusText="你可以在电脑上开始阅读了"):e.statusText="登录失败，请重新扫码登录"}).catch(function(){e.statusText="登录失败，请重新扫码登录"}))},handleConfirmSucceedButton:function(){this.canReceiveInfiniteCard?this.reportClientBusiness({itemName:"Web_Phone_LoginGiftClk"}):this.reportClientBusiness({itemName:"Web_Phone_LoginNoGiftClk"}),(0,f.default)(function(t){t?(0,l.default)({openUrl:(0,d.default)("",{})}):(0,s.default)()})}}}},661:function(t,e,n){},767:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n(131)),o=f(n(133));e.default=function(){var t,e;return{state:{newUserInfiniteInfo:{},unActiveInfiniteInfo:{}},mutations:(t={},(0,o.default)(t,a.UPDATE_LOGIN_CONFIRM_NEW_USER_INFINITE_INFO,function(t,e){t.newUserInfiniteInfo=e||{}}),(0,o.default)(t,a.UPDATE_LOGIN_CONFIRM_UN_ACTIVE_INFINITE_INFO,function(t,e){t.unActiveInfiniteInfo=e||{}}),t),actions:(e={},(0,o.default)(e,u.FETCH_LOGIN_CONFIRM_NEW_USER_INFINITE_INFO,function(t,e){var n=t.commit;return(0,r.default)("/web/login/confirm/infinite",(0,i.default)({},e,{cmd:"query",type:"newuser",source:"clickget"}),function(t){n(a.UPDATE_LOGIN_CONFIRM_NEW_USER_INFINITE_INFO,t.data)},function(){})}),(0,o.default)(e,u.FETCH_LOGIN_CONFIRM_UN_ACTIVE_INFINITE_INFO,function(t,e){var n=t.commit;return(0,r.default)("/web/login/confirm/infinite",(0,i.default)({},e,{cmd:"query",type:"unactive",source:"renewget"}),function(t){n(a.UPDATE_LOGIN_CONFIRM_UN_ACTIVE_INFINITE_INFO,t.data)},function(){})}),e)}};var r=f(n(192)),u=c(n(34)),a=c(n(60));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}},768:function(t,e,n){"use strict";var i=n(661);n.n(i).a},790:function(t,e,n){"use strict";function i(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_confirm_container"},[n("div",{staticStyle:{height:"18%"}}),t.loginSucceed?n("span",{staticClass:"login_confirm_logo login_confirm_logo_Succeed"}):n("span",{staticClass:"login_confirm_logo"}),n("p",{staticClass:"login_confirm_title",domProps:{innerHTML:t._s(t.loginSucceed?"登录成功":"微信读书网页版")}}),n("p",{staticClass:"login_confirm_status"},[t._v(t._s(t.statusText))]),n("div",{staticStyle:{flex:"1"}}),t.loginSucceed?n("a",{staticClass:"login_confirm_downloadButton",attrs:{href:"javascript:"},on:{click:t.handleConfirmSucceedButton}},[n("span",{staticClass:"login_confirm_downloadButton_btn wr_btn wr_btn_Gold"},[t._v(t._s(t.bottomLoginButtonText))]),n("span",{staticClass:"login_confirm_downloadButton_img"}),n("p",{staticClass:"login_confirm_downloadButton_text",domProps:{innerHTML:t._s(t.bottomLoginText)}})]):n("a",{staticClass:"login_confirm_confirmButton wr_btn wr_btn_Big",attrs:{href:"javascript:"},on:{click:t.handleConfirmButton}},[t._v("登 录")]),n("div",{style:t.loginSucceed?"height: 32px;":"height: 80px;"})])}var o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})}}]);