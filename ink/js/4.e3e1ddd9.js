(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{573:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ReviewListTypeBookTop=3,t.ReviewListTypeBookFriendTop=4,t.ReviewListTypeNote=11},621:function(e,t,i){"use strict";i.r(t);var n=i(622),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=r.a},622:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(742)),r=s(i(626)),a=s(i(43)),o=s(i(278));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:"WriteBookReviewDialog",components:{Dialog:a.default,WriteReviewPanel:n.default,ReviewStarControl:r.default},data:function(){return{curUser:{},bookId:"",score:0,canSubmit:!1,isSending:!1,isSendedSucc:!1,submitCallback:null,beforeSubmitCallback:null}},created:function(){(0,o.default)()},computed:{panel:function(){return this.$refs.panel},dialog:function(){return this.$refs.dialog}},mounted:function(){this.$nextTick(function(){})},methods:{showDialog:function(e,t,i){var n=0<arguments.length&&void 0!==e?e:{},r=this,a=t,o=i;a&&(this.beforeSubmitCallback=a),o&&(this.submitCallback=o),n.user&&(this.curUser=n.user),n.bookId&&(this.bookId=n.bookId),n.score&&(this.score=n.score,this.$nextTick(function(){var e=r.$refs.starControl;e&&e.updateScore(r.score)})),this.updateSubmitButtonAppearance(),this.$refs.dialog.showDialog()},closeDialog:function(){this.dialog.closeDialog()},handleDidHideDialog:function(){if(this.isSendedSucc){this.panel&&(this.panel.resetPanelData(),this.panel.updatePrivateState());var e=this.$refs.starControl;e&&e.updateScore(0),this.score=0,this.canSubmit=!1,this.isSending=!1,this.isSendedSucc=!1,this.updateSubmitButtonAppearance()}else this.$hideToast()},setIsSending:function(e){this.isSending=e},getIsSending:function(){return this.isSending},setIsSendedSucc:function(e){this.isSendedSucc=e},handleClickDialog:function(){this.dialog&&this.panel&&this.panel.hidePrivateMenu()},updateSubmitButtonAppearance:function(){if(0<this.score)this.canSubmit=!0;else{if(this.panel){var e=this.panel.getReviewText();if(e&&e.length)return void(this.canSubmit=!0)}this.canSubmit=!1}},handleTextAreaChange:function(){this.updateSubmitButtonAppearance()},handleSubmitEvent:function(){if(this.canSubmit){var e=this.panel.getReviewText(),t=this.panel.getReviewHtml(),i=this.panel.getPrivateState();console.log("[zhoonlog] text = "+e+" html = "+t+" private = "+i+" score = "+this.score),this.beforeSubmitCallback&&this.beforeSubmitCallback(),this.submitCallback&&(this.reportClientBusiness({itemName:"Web_WriteBookReview_Submit_"+(0===i?"Publish":1===i?"Follow":"Secret"),vid:this.curUser.vid||0}),this.submitCallback({bookId:this.bookId,content:e,star:this.score,isPrivate:i}))}},handleBookReviewClick:function(e){var t=e.score;this.score=t,this.reportClientBusiness({itemName:"Web_WriteBookReview_Select_Star",vid:this.curUser.vid||0}),this.updateSubmitButtonAppearance()},handleTextAreaFocusEvent:function(){}}}},623:function(e,t,i){"use strict";i.r(t);var n=i(624),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=r.a},624:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(i(280)),r=i(63),a=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=i(7),u=i(22),l=["公开","关注","私密"],c="wr_reviewPrivateState";t.default={name:"WriteReviewPanel",components:{Menu:n.default},props:{curUser:{type:Object,require:!1,default:{}},editable:{type:Boolean,require:!1,default:!0},privateState:{type:Number,require:!1,default:0},placeholder:{type:String,require:!1,default:"点评这本书..."}},created:function(){s.isEnvClient&&(this.debouncedContentChanged=u.debounce(this.emitTextAreaChangeText,200))},data:function(){return{content:"",curPrivateState:-1,privateOptions:l,debouncedContentChanged:null}},watch:{content:function(e,t){e!==t&&this.debouncedContentChanged&&this.debouncedContentChanged()}},mounted:function(){s.isEnvClient&&this.updatePrivateState()},computed:{privateText:function(){return-1===this.curPrivateState?l[this.privateState]:l[this.curPrivateState]},privateIconClass:function(){function e(e){switch(e){case 0:return"writeReview_private_button_Publish";case 1:return"writeReview_private_button_Follow";case 2:return"writeReview_private_button_Private"}}return-1===this.curPrivateState?e(this.privateState):e(this.curPrivateState)}},methods:{showPrivateMenu:function(){var e=this.$refs.writeReview_footer_Menu;e&&e.showMenu()},hidePrivateMenu:function(){var e=this.$refs.writeReview_footer_Menu;e&&e.hideMenu()},updatePrivateState:function(){var e=a.default.getLocalSettingOperator(),t=e.getValueWithType(r.LOCAL_SETTING_OBJ_KEYS.WRITE_REVIEW_PRIVATE_STATE,"number");if(null!==t&&-1!==[0,1,2].indexOf(t))this.curPrivateState=t;else{var i=a.default.getLocalStorage(c);i&&(this.curPrivateState=parseInt(i),a.default.removeLocalStorage(c),e.value[r.LOCAL_SETTING_OBJ_KEYS.WRITE_REVIEW_PRIVATE_STATE]=this.curPrivateState,e.save())}},resetPanelData:function(){this.content="",this.curPrivateState=-1},emitSubmitEvent:function(){this.$emit("handle-submit-event")},emitTextAreaChangeText:function(){this.$emit("handle-textarea-change")},emitFocusEvent:function(){this.hidePrivateMenu(),this.$emit("handle-focus-event")},handlePrivateButtonClick:function(){this.reportClientBusiness({itemName:"Web_WriteReviewPanel_Private_Clk",vid:this.curUser.vid||0}),this.showPrivateMenu()},handleClickMenuOption:function(e){switch(e.index){case 0:this.curPrivateState=0,this.reportClientBusiness({itemName:"Web_WriteReviewPanel_Publish_Clk",vid:this.curUser.vid||0});break;case 1:this.curPrivateState=1,this.reportClientBusiness({itemName:"Web_WriteReviewPanel_Follow_Clk",vid:this.curUser.vid||0});break;case 2:this.curPrivateState=2,this.reportClientBusiness({itemName:"Web_WriteReviewPanel_Secret_Clk",vid:this.curUser.vid||0})}var t=a.default.getLocalSettingOperator();t.value[r.LOCAL_SETTING_OBJ_KEYS.WRITE_REVIEW_PRIVATE_STATE]=this.curPrivateState,t.save()},getReviewText:function(){var e=document.querySelector(".writeReview_editor .writeReview_textarea");return e?e.value:""},getReviewHtml:function(){return this.getReviewText()},getPrivateState:function(){return-1===this.curPrivateState?this.privateState:this.curPrivateState}}}},625:function(e,t,i){},626:function(e,t,i){"use strict";i.r(t);var n=i(813),r=i(627);for(var a in r)"default"!==a&&function(e){i.d(t,e,function(){return r[e]})}(a);i(744);var o=i(3),s=Object(o.a)(r.default,n.a,n.b,!1,null,null,null);t.default=s.exports},627:function(e,t,i){"use strict";i.r(t);var n=i(628),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=r.a},628:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ReviewStarControl",props:{initScore:{type:Number,require:!1,default:0},title:{type:String,require:!1,default:""},titleAlign:{type:String,require:!1,default:"left"},canSelect:{type:Boolean,require:!1,default:!1},starSize:{type:Number,require:!1,default:24},starSpace:{type:Number,require:!1,default:4}},data:function(){return{score:-1}},computed:{normalStarCount:function(){return 5},selectedStarCount:function(){return this.canSelect?0<this.score?Math.round(this.score/20):Math.round(this.initScore/20):0},starContentStyle:function(){var e=[];return e.push("width: "+(this.starSize*this.normalStarCount+this.starSpace*(this.normalStarCount-1))+"px;"),e.push("height: "+this.starSize+"px;"),e.join("")},titleStyle:function(){var e=[];return e.push("text-align: "+this.titleAlign+";"),e.join("")}},methods:{updateScore:function(e){this.score=e},handleClickControlEvent:function(e){for(var t=e.target,i=Number(t.getAttribute("data-index")),n=document.querySelectorAll(".review_starControl_normal .normal_starItem"),r=0;r<n.length;r++){var a=n[r],o=Number(a.getAttribute("data-index"));if(a&&o===i){this.updateScore(20*o);break}}0<this.score&&this.$emit("emit-review-star-click",{score:this.score})}}}},629:function(e,t,i){},630:function(e,t,i){},669:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=p(i(523)),n=p(i(133)),l=p(i(131)),u=p(i(277)),r=p(i(193)),a=p(i(194));t.default=function(){var e,t;return{state:{bookInfo:{},reviewSingle:{},topReviews:{reviewListType:d.ReviewListTypeBookTop,synckey:0,reviewList:[],totalCount:0,isFetching:!1,hasMore:!1},topFriendReviews:{reviewListType:d.ReviewListTypeBookFriendTop,synckey:0,reviewList:[],totalCount:0,isFetching:!1,hasMore:!1},noteReviews:{reviewListType:d.ReviewListTypeNote,synckey:0,reviewList:[],totalCount:0,isFetching:!1,hasMore:!1},bookmarks:{bookmarkList:[],isFetching:!1}},mutations:(e={},(0,n.default)(e,c.UPDATE_BOOK_REVIEW_BOOK_INFO,function(e,t){e.bookInfo=t}),(0,n.default)(e,c.UPDATE_BOOK_REVIEW_SINGLE,function(e,t){e.reviewSingle=t}),(0,n.default)(e,c.UPDATE_BOOK_REVIEW_LIST,function(e,t){var i=t.reviewListType,n=t.reviewList,r=t.totalCount,a=t.hasMore,o=m(i);if(o&&e[o]){n=n.filter(function(e){return 4===e.review.type});var s=e[o].reviewList||[];s.push.apply(s,(0,u.default)(n)),e[o]=(0,l.default)({},e[o],{reviewList:s,totalCount:r,hasMore:a})}}),(0,n.default)(e,c.UPDATE_BOOK_REVIEW_LIST_SYNC_KEY,function(e,t){var i=t.listType,n=t.synckey,r=m(i);r&&e[r]&&(e[r]=(0,l.default)({},e[r],{synckey:n}))}),(0,n.default)(e,c.UPDATE_BOOK_REVIEW_FETCHING,function(e,t){var i=t.listType,n=t.isFetching,r=m(i);r&&e[r]&&(e[r]=(0,l.default)({},e[r],{isFetching:n}))}),(0,n.default)(e,c.UPDATE_BOOK_BOOKMARK_LIST,function(e,t){e.bookmarks=(0,l.default)({},e.bookmarks,{bookmarkList:t})}),(0,n.default)(e,c.UPDATE_BOOK_BOOKMARK_LIST_FETCHING,function(e,t){var i=t.isFetching;e.bookmarks=(0,l.default)({},e.bookmarks,{isFetching:i})}),(0,n.default)(e,c.INSERT_BOOKMARK_INTO_LIST,function(e,t){for(var i=e.bookmarks.bookmarkList,n=[],r=-1,a=0,o=i.length;a<o;a++){var s=i[a];-1===r&&0<s.compareTo(t)&&(r=a,n.push(t)),n.push(s)}-1===r&&(n.push(t),r=n.length-1),t.updateFirstInChapter(0<r?n[r-1]:null),r+1<n.length&&n[r+1].updateFirstInChapter(t),e.bookmarks=(0,l.default)({},e.bookmarks,{bookmarkList:n})}),(0,n.default)(e,c.REMOVE_BOOKMARK_FROM_LIST,function(e,t){for(var i=e.bookmarks.bookmarkList,n=[],r=-1,a=0,o=i.length;a<o;a++){var s=i[a];if(s.bookmarkId===t?r=a:n.push(s),-1!==r&&r+1===a){var u=0<r?i[r-1]:null;s.updateFirstInChapter(u)}}e.bookmarks=(0,l.default)({},e.bookmarks,{bookmarkList:n})}),(0,n.default)(e,c.UPDATE_BOOKMARK_IN_LIST,function(e,t){for(var i=t.bookmarkId,n=t.style,r=e.bookmarks.bookmarkList,a=0,o=r.length;a<o;a++){var s=r[a];if(s.bookmarkId===i){s.style=n;break}}e.bookmarks=(0,l.default)({},e.bookmarks,{bookmarkList:r})}),e),actions:(t={},(0,n.default)(t,s.FETCH_BOOK_REVIEW_BOOK_INFO,function(e,t){var i=e.commit,n=e.dispatch,r=t.bookId,a=t.envConfig||{},o=t.isLogin||!1;return(!r||r.length<=0)&&(console.log("[zhoonlog] bookInfo no bookId"),w.isEnvClient&&w.inDevelopment()&&alert("bookInfo no bookId")),n(s.FETCH_BOOK_INFO,{bookId:r,isLogin:o,envConfig:a}).then(function(e){var t=e||{};i(c.UPDATE_BOOK_REVIEW_BOOK_INFO,t)}).catch(function(e){console.log("[zhoonlog] bookInfo err = "+e)})}),(0,n.default)(t,s.FETCH_BOOK_REVIEW_LIST,function(e,t){var a=e.commit,i=t.bookId,n=t.envConfig||{},o=t.append||!1;i||(console.log("[zhoonlog] review list no bookId"),w.isEnvClient&&w.inDevelopment()&&alert("review lsit no bookId"));var s={bookId:i};return s.listType=k.get(t,"listType",d.ReviewListTypeBookTop),s.maxIdx=k.get(t,"maxIdx",0),s.count=k.get(t,"count",20),s.listMode=2,s.synckey=k.get(t,"synckey",0),t.userVid&&(s.userVid=t.userVid),a(c.UPDATE_BOOK_REVIEW_FETCHING,{listType:s.listType,isFetching:!0}),(0,f.default)("/web/review/list",(0,l.default)({},s,n)).then(function(e){var t=k.get(e,"data.reviews",[]),i=k.get(e,"data.totalCount",0),n=t.length>=s.count,r=k.get(e,"data.synckey",0);return a(c.UPDATE_BOOK_REVIEW_LIST,{reviewListType:s.listType,reviewList:t,totalCount:i,hasMore:n,append:o}),a(c.UPDATE_BOOK_REVIEW_FETCHING,{listType:s.listType,isFetching:!1}),a(c.UPDATE_BOOK_REVIEW_LIST_SYNC_KEY,{listType:s.listType,synckey:r}),e}).catch(function(e){return a(c.UPDATE_BOOK_REVIEW_FETCHING,{listType:s.listType,isFetching:!1}),console.log("[zhoonlog] review list err = "+e),e})}),(0,n.default)(t,s.FETCH_BOOK_REVIEW_SINGLE,function(e,t){var i=e.commit,n=t.reviewId;return n||(console.log("[zhoonlog] reviewSingle no reviewId"),w.isEnvClient&&w.inDevelopment()&&alert("reviewSingle no reviewId")),(0,f.default)("/web/review/single",{reviewId:n}).then(function(e){var t=k.get(e,"res.data.review",{});return i(c.UPDATE_BOOK_REVIEW_SINGLE,t),e}).catch(function(e){return console.log("[zhoonlog] reviewSingle err = "+e),e})}),(0,n.default)(t,s.FETCH_BOOK_REVIEW_ADD,function(e,t){(0,v.default)(e);var i={type:t.type||4,bookId:"",chapterUid:0,content:"",bookVersion:0},n=t.bookId,r=t.content,a=t.star,o=t.chapterUid,s=t.isPrivate,u=t.abstract,l=t.refReviewId,c=t.range,d=t.isLike;return!n||n.length<=0?(console.log("[zhoonlog] add review no bookId"),w.isEnvClient&&w.inDevelopment()&&alert("add review no bookId")):i.bookId=n,(!a||a<=0)&&(!r||r.length<=0)&&(console.log("[zhoonlog] add review content"),w.isEnvClient&&w.inDevelopment()&&alert("add review no content")),r&&(i.content=r),o&&(i.chapterUid=o),a&&(i.star=a),1===s&&(i.friendship=1),2===s&&(i.isPrivate=1),u&&(i.abstract=u),d&&(i.isLike=d),l&&(i.refReviewId=l),c&&(i.range=c),(0,h.default)("/web/review/add",i).then(function(e){return e}).catch(function(e){return e})}),(0,n.default)(t,s.FETCH_BOOK_REVIEW_DELETE,function(e,t){(0,v.default)(e);var i=t.reviewId;return i||(console.log("[zhoonlog] reviewDelete no reviewId"),w.isEnvClient&&w.inDevelopment()&&alert("reviewSingle no reviewId")),(0,h.default)("/web/review/delete",{reviewId:i}).then(function(e){return e}).catch(function(e){return e})}),(0,n.default)(t,s.FETCH_BOOK_BOOKMARK_LIST,function(e,t){var i=e.commit,n=t.bookId;if(n){var r={bookId:n};return t.type&&(r.type=t.type),i(c.UPDATE_BOOK_BOOKMARK_LIST_FETCHING,{isFetching:!0}),(0,f.default)("/web/book/bookmarklist",r).then(function(e){var t=k.get(e.data,"updated",[]);return t=function(e){if(0===e.length)return[];var t=e.map(function(e){return new b(e)}).sort(function(e,t){return e.compareTo(t)}),i=null;return t.forEach(function(e){e.updateFirstInChapter(i),i=e}),t}(t),i(c.UPDATE_BOOK_BOOKMARK_LIST,t),i(c.UPDATE_BOOK_BOOKMARK_LIST_FETCHING,{isFetching:!1}),e}).catch(function(e){return i(c.UPDATE_BOOK_BOOKMARK_LIST_FETCHING,{isFetching:!1}),e})}}),(0,n.default)(t,s.ADD_BOOKMARK,function(e,a){var o=e.commit;return(0,h.default)("/web/book/addBookmark",a).then(function(e){var t=e.data,i=k.get(t,"bookmarkId"),n=i&&0<i.length;if(n){var r=new b((0,l.default)({},a,{bookmarkId:i}));o(c.INSERT_BOOKMARK_INTO_LIST,r)}return{succ:n?1:0}}).catch(function(e){return console.error("fetchAddBookmark fail: ",a,e),{succ:0}})}),(0,n.default)(t,s.REMOVE_BOOKMARK,function(e,i){var n=e.commit;return(0,h.default)("/web/book/removeBookmark",i).then(function(e){var t=1===e.data.succ;return t&&n(c.REMOVE_BOOKMARK_FROM_LIST,i.bookmarkId),{succ:t?1:0}}).catch(function(e){return console.error("removeBookmark fail: ",i,e),{succ:0}})}),(0,n.default)(t,s.UPDATE_BOOKMARK,function(e,i){var n=e.commit;return(0,h.default)("/web/book/updateBookmark",i).then(function(e){var t=1===e.data.succ;return t&&n(c.UPDATE_BOOKMARK_IN_LIST,i),{succ:t?1:0}}).catch(function(e){return console.error("updateBookmark fail: ",i,e),{succ:0}})}),t)}};var c=_(i(60)),s=_(i(34)),d=_(i(573)),o=p(i(670)),f=p(i(192)),h=p(i(62));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var w=i(7),k=i(22);function m(e){var t="";switch(e){case d.ReviewListTypeBookTop:t="topReviews";break;case d.ReviewListTypeBookFriendTop:t="topFriendReviews";break;case d.ReviewListTypeNote:t="noteReviews"}return t}var b=((0,a.default)(g,[{key:"compareTo",value:function(e){if(this.chapterUid!==e.chapterUid)return this.chapterUid<e.chapterUid?-1:1;var t=this.range.start,i=e.range.start;return t===i?0:t<i?-1:1}},{key:"updateFirstInChapter",value:function(e){e&&this.chapterUid===e.chapterUid?this.firstInChapter=!1:this.firstInChapter=!0}}]),g);function g(e){(0,r.default)(this,g),this.style=e.style||0,this.markText=e.markText,this.type=e.type,this.chapterUid=e.chapterUid,this.bookmarkId=e.bookmarkId;var t=(e.range||"").split("-");this.range=new o.default(t[0]?parseInt(t[0]):-1,t[1]?parseInt(t[1]):-1),this.firstInChapter=!1}},670:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(193));function r(e){return e&&e.__esModule?e:{default:e}}var a=((0,r(i(194)).default)(o,null,[{key:"isIntersection",value:function(e,t){return e.start<=t.end&&t.start<=e.end}},{key:"isContain",value:function(e,t){return e.start<=t.start&&e.end>=t.end}},{key:"union",value:function(e,t){return new o(Math.min(e.start,t.start),Math.max(e.end,t.end))}}]),o);function o(e,t){(0,n.default)(this,o),this.start=e,this.end=t}t.default=a},676:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(26)),r=a(i(741));function a(e){return e&&e.__esModule?e:{default:e}}var o=i(7),s=new(n.default.extend(r.default));function u(e,t,i){o.isEnvClient&&(s.$el&&s.$el.parentNode||(s.$mount(document.createElement("div")),document.body.appendChild(s.$el)),s.showDialog(e,t,i))}t.default=function(){n.default.prototype.$writeReviewDialog=s,n.default.prototype.$showWriteReviewDialog=u}},741:function(e,t,i){"use strict";i.r(t);var n=i(827),r=i(621);for(var a in r)"default"!==a&&function(e){i.d(t,e,function(){return r[e]})}(a);i(745);var o=i(3),s=Object(o.a)(r.default,n.a,n.b,!1,null,null,null);t.default=s.exports},742:function(e,t,i){"use strict";i.r(t);var n=i(834),r=i(623);for(var a in r)"default"!==a&&function(e){i.d(t,e,function(){return r[e]})}(a);i(743);var o=i(3),s=Object(o.a)(r.default,n.a,n.b,!1,null,null,null);t.default=s.exports},743:function(e,t,i){"use strict";var n=i(625);i.n(n).a},744:function(e,t,i){"use strict";var n=i(629);i.n(n).a},745:function(e,t,i){"use strict";var n=i(630);i.n(n).a},813:function(e,t,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"review_starControl_container",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickControlEvent(e)}}},[t.title&&0<t.title.length?i("p",{staticClass:"review_starControl_title",style:t.titleStyle},[t._v(t._s(t.title))]):t._e(),i("div",{staticClass:"review_starControl_content",style:t.starContentStyle},[i("div",{staticClass:"review_starControl_normal"},t._l(t.normalStarCount,function(e){return i("span",{key:e,staticClass:"normal_starItem",attrs:{"data-index":e}})}),0),i("div",{staticClass:"review_starControl_selected"},[t._l(t.selectedStarCount,function(e){return i("span",{key:e,staticClass:"selected_starItem",attrs:{"data-index":e}})}),t._l(t.normalStarCount-t.selectedStarCount,function(e){return i("span",{key:e+t.selectedStarCount,staticClass:"selected_starItem_Placeholder",attrs:{"data-index":e+t.selectedStarCount}})})],2)])])}var r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},827:function(e,t,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Dialog",{ref:"dialog",attrs:{"custom-selector":"writeReview_dialog_container"},on:{onHide:e.handleDidHideDialog}},[i("div",{staticClass:"writeReview_dialog_header",on:{click:e.handleClickDialog}},[i("ReviewStarControl",{ref:"starControl",staticClass:"writeReview_dialog_starControl",attrs:{title:"评分","init-score":0,"can-select":!0},on:{"emit-review-star-click":e.handleBookReviewClick}}),i("div",{staticClass:"writeReview_dialog_clear"})],1),i("div",{class:["writeReview_dialog_content",{disabled:!e.canSubmit}],on:{click:e.handleClickDialog}},[i("WriteReviewPanel",{ref:"panel",staticClass:"writeReview_dialog_panel",attrs:{"cur-user":e.curUser},on:{"handle-textarea-change":e.handleTextAreaChange,"handle-focus-event":e.handleTextAreaFocusEvent,"handle-submit-event":e.handleSubmitEvent}})],1)])}var r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},834:function(e,t,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"writeReview_container"},[i("div",{staticClass:"writeReview_editor"},[t.editable?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"writeReview_textarea",attrs:{name:"WriteBookReview",id:"WriteBookReview",placeholder:t.placeholder},domProps:{value:t.content},on:{focus:t.emitFocusEvent,input:function(e){e.target.composing||(t.content=e.target.value)}}}):i("textarea",{staticClass:"writeReview_textarea",attrs:{name:"WriteBookReview",id:"WriteBookReviewReadOnly",readonly:""}})]),i("div",{staticClass:"writeReview_footer"},[i("div",{staticClass:"writeReview_footer_Border"},[i("Menu",{ref:"writeReview_footer_Menu",attrs:{defaultSelectedIndex:0,"list-margin-top":"-160px","list-max-height":"180px",optionList:t.privateOptions,align:"left"},on:{"handle-click-menu-option":t.handleClickMenuOption},scopedSlots:t._u([{key:"optionsItem",fn:function(e){return[i("span",{class:["writeReview_footer_Menu_Icon",0===e.index?"publish":1===e.index?"follow":"secret"]}),i("span",{staticClass:"writeReview_footer_Menu_Title"},[t._v(t._s(e.option))]),i("span",{staticClass:"writeReview_footer_Menu_Subtitle"},[t._v(t._s(0===e.index?"所有人可见":1===e.index?"仅互相关注可见":"仅自己可见"))])]}}])},[i("a",{class:["writeReview_private_button",t.privateIconClass],attrs:{href:"javascript:"},on:{click:function(e){return e.stopPropagation(),t.handlePrivateButtonClick(e)}}},[i("span",{staticClass:"button_leftIcon"}),i("span",{staticClass:"button_text"},[t._v(t._s(t.privateText))]),i("span",{staticClass:"button_rightIcon"})])]),i("a",{staticClass:"writeReview_submit_button wr_btn wr_btn_Big",attrs:{href:"javascript:"},on:{click:t.emitSubmitEvent}},[t._v("发 表")]),i("div",{staticClass:"writeReview_footer_Clear"})],1)])])}var r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})}}]);